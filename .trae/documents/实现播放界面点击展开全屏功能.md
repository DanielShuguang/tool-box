# 实现播放界面点击展开全屏及弹出播放列表功能

## 需求分析

1. **点击下方播放动态效果展开全屏**
   - 点击专辑封面旋转动画容器，展开播放界面
   - 展开后铺满整个页面，遮挡所有其他组件
   - 收缩功能放在单独的按钮上

2. **全屏界面增加播放列表弹出按钮**
   - 点击按钮弹出当前正在播放的列表
   - 列表支持虚拟滚动
   - 保持与现有播放列表一致的交互体验

## 实现思路

1. **全屏状态管理**
   - 在主组件中添加全屏状态变量
   - 通过事件传递实现状态切换
   - 根据状态调整组件显示和样式

2. **全屏展开/收缩**
   - 给专辑封面容器添加点击事件
   - 添加专门的收缩按钮
   - 调整样式使播放器铺满整个页面

3. **弹出播放列表功能**
   - 添加播放列表弹出按钮
   - 实现弹出层组件，支持虚拟滚动
   - 复用现有虚拟滚动逻辑
   - 实现弹出/收起动画效果

4. **虚拟滚动实现**
   - 复用现有 `useVirtualList` 逻辑
   - 调整弹出层样式和布局
   - 保持与主播放列表一致的交互

## 具体实现步骤

### 1. 修改主组件 MusicPlayer.vue

* 添加 `isFullScreen` ref 管理全屏状态
* 调整模板结构，根据全屏状态控制组件显示
* 添加全屏状态切换方法
* 实现全屏状态下的布局调整

### 2. 修改 PlayerPanel.vue

* 给专辑封面容器添加点击事件，触发全屏展开
* 添加专门的收缩按钮，仅在全屏状态下显示
* 添加播放列表弹出按钮
* 调整样式，使其在全屏状态下铺满页面
* 优化全屏状态下的布局和控制元素

### 3. 创建 FullScreenPlaylistPopup.vue 组件

* 实现弹出层组件，包含虚拟滚动列表
* 复用现有虚拟滚动逻辑
* 添加弹出/收起动画效果
* 实现列表项点击、双击、右键菜单等交互
* 支持搜索功能

### 4. 样式调整

* 全屏状态下 PlayerPanel 高度变为 100vh
* 使用 z-index: 1000 确保全屏面板显示在最上层
* 设计弹出按钮和收缩按钮的样式和位置
* 弹出播放列表支持虚拟滚动，保持良好性能
* 为弹出层添加过渡动画

## 预期效果

* 点击下方播放动态效果，播放界面展开铺满整个页面
* 展开后，右上角显示专门的收缩按钮
* 全屏界面显示播放列表弹出按钮
* 点击弹出按钮，显示当前正在播放的列表，支持虚拟滚动
* 列表项支持点击播放、右键菜单等交互
* 弹出层可以平滑收起

## 技术要点

1. **状态管理**：使用 Vue 3 的 ref 和 computed 管理全屏状态
2. **事件传递**：通过 emit 和 props 实现组件间通信
3. **虚拟滚动**：复用现有 `useVirtualList` 逻辑，确保性能
4. **样式调整**：使用条件样式和 CSS 过渡实现平滑效果
5. **组件设计**：创建可复用的弹出层组件
6. **交互优化**：确保各种状态下的交互体验一致

## 文件修改清单

1. `src/views/MusicPlayer/MusicPlayer.vue` - 主组件，添加全屏状态管理
2. `src/views/MusicPlayer/components/PlayerPanel.vue` - 播放器面板，添加点击展开和弹出按钮
3. `src/views/MusicPlayer/components/FullScreenPlaylistPopup.vue` - 新增，全屏状态下的弹出播放列表
4. 相关样式文件调整