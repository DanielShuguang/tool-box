# 为记账页面接入IndexedDB存储方案

## 1. 扩展IndexedDB实现

### 1.1 修改`src/utils/storage/indexeddb.ts`
- 扩展`ToolBoxDB`类，为记账记录创建专门的表
- 为记账记录表添加索引，支持按日期、类型、分类等字段查询
- 实现分页查询方法，支持`limit`和`offset`参数
- 实现按条件查询方法，支持过滤条件

### 1.2 扩展存储接口
- 在`src/utils/storage/interface.ts`中添加分页查询相关方法
- 添加按条件查询方法

## 2. 创建新的Pinia插件

### 2.1 创建`src/plugins/pinia-indexeddb.ts`
- 实现一个新的Pinia插件，专门用于使用IndexedDB
- 支持分页查询数据，避免全量加载
- 支持按条件查询和排序
- 提供通用的CRUD操作方法
- 不影响现有的持久化插件

## 3. 修改记账相关代码

### 3.1 修改`src/stores/accounting.ts`
- 使用新的IndexedDB插件
- 实现分页加载记录
- 添加按条件查询记录的方法
- 优化数据管理逻辑，避免内存爆炸

### 3.2 修改记账页面
- 实现分页加载和显示记录
- 添加查询和筛选功能
- 优化用户体验

## 4. 测试和优化

### 4.1 测试功能
- 测试记账记录的添加、删除、查询功能
- 测试分页加载性能
- 测试数据持久化功能

### 4.2 优化性能
- 优化IndexedDB查询性能
- 优化插件代码结构
- 确保代码符合项目规范

## 技术要点

1. **分页查询**：参考传统SQL的`LIMIT`和`OFFSET`语法，实现数据的部分读取
2. **索引优化**：为常用查询字段添加索引，提高查询性能
3. **内存管理**：避免全量加载数据，只加载当前需要的数据
4. **通用设计**：新插件设计为通用的，方便后续其他功能使用
5. **兼容性**：保持与现有代码的兼容性，不影响原有功能

## 预期效果

- 记账功能的数据存储迁移到IndexedDB
- 支持大量数据的高效存储和查询
- 避免内存爆炸问题
- 提供通用的IndexedDB操作插件，方便后续功能扩展